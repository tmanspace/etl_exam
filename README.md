
# ETL Exam Project

---

## üìå –≠—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä –¥–∞–Ω–Ω—ã—Ö
- –ò—Å—Ö–æ–¥–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –±—ã–ª –∑–∞–≥—Ä—É–∂–µ–Ω –≤ **Yandex Object Storage**.
- –í `exe1/code/create_transactions_v2.yql` –æ–ø–∏—Å–∞–Ω —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è YDB.
- –° –ø–æ–º–æ—â—å—é `ydb_connect.bash` –∏ `ydb_import.bash` –¥–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ YDB.
- –ë—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ YDB –≤ Object Storage —Å –ø–æ–º–æ—â—å—é Data Transfer.
    - –ë—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ –ø—Ä–∏–µ–º–Ω–∏–∫
    - –ë–∞–∫–µ—Ç –¥–ª—è –ø—Ä–∏–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö
    - –°–∞–º –æ–±—ä–µ–∫—Ç —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ (–µ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

<details>
    <summary><b>–°–∫—Ä–∏–Ω—à–æ—Ç—ã</b></summary>
    - ![–ö–æ–ª-–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ](exe1/screenshots/01_count_table_items.png)
    - ![–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã](exe1/screenshots/02_endpoints.png)
    - ![–¢—Ä–∞–Ω—Å—Ñ–µ—Ä](exe1/screenshots/03_transfer.png)
    - ![–ü—Ä–∏–º–µ—Ä —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö](exe1/screenshots/04_transfered_data.png)
</details> 

### 2. Airflow + Dataproc
- –°–æ–∑–¥–∞–Ω DAG (`exe2/code/dag.py`), –∫–æ—Ç–æ—Ä—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫ Spark-–∑–∞–¥–∞—á –Ω–∞ Dataproc.
- –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ `job.py`.
- Dataproc –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

<details>
    <summary><b>–°–∫—Ä–∏–Ω—à–æ—Ç—ã</b></summary>
    - ![–õ–æ–≥–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏](exe2/screenshots/00_terminal_job_input.png)
    - ![–î–∞—Ç–∞ –ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ –±–∞–∫–µ—Ç](exe2/screenshots/01_dataproc_bucket.png)
    - ![–†–µ–∑—É–ª—å—Ç–∞—Ç](exe2/screenshots/02_result_parquet.png)
</details> 

### 3. Kafka + Spark Streaming
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω **writer** (`kafka_write.py`), –∫–æ—Ç–æ—Ä—ã–π —Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Parquet –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –±–∞—Ç—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Kafka.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω **reader** (`kafka_read.py`), –∫–æ—Ç–æ—Ä—ã–π:
  - —á–∏—Ç–∞–µ—Ç –ø–æ—Ç–æ–∫ –∏–∑ Kafka,
  - –ø–∞—Ä—Å–∏—Ç JSON –ø–æ —Å—Ö–µ–º–µ,
  - –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ PostgreSQL.
- –î–∞–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–æ–≤–æ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –≤ –∫–ª–∞—Å—Ç–µ—Ä **Managed PostgreSQL** –≤ —Ç–∞–±–ª–∏—Ü—É `transactions`.
- –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ç–∞–±–ª–∏—Ü—ã:
![–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö](exe3/screenshot/data_amount.png)
![–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö](exe3/screenshot/data_by_kafka_read.png)

### 4. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ DataLens
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ PostgreSQL –∫ DataLens (—Å–º. [datalens_connect.png](exe4/datalens_connect.png)).
- –ü–æ—Å—Ç—Ä–æ–µ–Ω –¥–∞—à–±–æ—Ä–¥ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:

![–î–∞—à–±–æ—Ä–¥](exe4/datalens_dash.png)

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∞—à–±–æ—Ä–¥–∞:**
- üìà –ö—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è —Å—É–º–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤–æ –≤—Ä–µ–º–µ–Ω–∏  
- ü•ß –°—É–º–º—ã –æ–ø–ª–∞—Ç –ø–æ —Ç–∏–ø–∞–º  
- üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –º–µ—Å—è—Ü–∞–º  
- ü•ß –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ —Ç–∏–ø–∞–º  

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Yandex Cloud** (Object Storage, YDB, Dataproc, Managed Kafka, Managed PostgreSQL, DataLens)
- **Apache Spark 3.0.3** (Structured Streaming)
- **Apache Kafka**
- **Airflow**
- **PostgreSQL**
- **Python / PySpark**

---

## üìé –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
[github.com/tmanspace/etl_exam](https://github.com/tmanspace/etl_exam)
